<div class="container">
  <div class="row center-xs">
    <div class="col-xs">
      <h3 class="blue">Conteos rápidos</h3>
    </div>
  </div>
  <mat-accordion>
    <!-- Conteos por tipo : Inicio -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title class="center-xs">
          <h4 style="margin: 16px;" class="blue">Eventos por <b>tipo</b></h4>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <!-- Iconos circulares para filtrar -->
      <div class="row center-xs">
        <ng-container *ngFor="let count of countsEventType; let i = index">
          <div *ngIf="count.amount" class="col-xs-6 col-sm-4 col-md-3 col-lg-2" style="padding:10px;">
            <button
              (click)="filterByButton('Type',i)"
              [ngClass]="count.class"
              class="counter" style="border: 3px solid; padding: 10px; cursor: pointer;">
              <br>
              <span class="salient" [id]="count.name"> {{ count.amount }} </span>
              <span class="description"> Eventos </span>
              <b>{{ count.pluralDisplayName }}</b>
            </button>
          </div>
        </ng-container>
      </div>
    </mat-expansion-panel>
    <!-- Conteos por tipo : Fin -->
  </mat-accordion>
  <div class="row center-xs">
    <div class="col-xs">
      Total items filtrados: {{ length }}
    </div>
  </div>

  <!-- Inicio de card para filtros y tabla -->
  <div class="row">
    <mat-card class="card-container col-xs-12">
      <mat-card-title></mat-card-title>

      <br />
      <!-- Busqueda rapida por frontend -->
      <mat-form-field appearance="standard" class="width-inputs">
        <mat-label>Busqueda rapida por</mat-label>
        <input matInput appUppercase (keyup)="applyFilterFast($event)" placeholder="Ej. Regulador de vacio" #input />
      </mat-form-field>

      <div class="row spacer">
        <hr class="blue line-separator" />
      </div>

      <mat-card-content class="table-with-overflow">
        <table mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)" matSortStart="desc"
          style="width: 100%" matTableExporter #exporter="matTableExporter">
          <!-- Position Column -->
          <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef>No.</th>
            <td mat-cell *matCellDef="let element" class="center-xs">
              {{ element.position }}
            </td>
          </ng-container>

          <!-- Title Column -->
          <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Título</th>
            <td mat-cell *matCellDef="let element">{{ element.title }}</td>
          </ng-container>

          <!-- Type nombre -->
          <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Tipo
            </th>
            <td mat-cell *matCellDef="let element" >{{ element.type }}</td>
          </ng-container>

          <!-- Description -->
          <ng-container matColumnDef="description">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Descripción</th>
            <td mat-cell *matCellDef="let element">{{ element.description }}</td>
          </ng-container>

          <!-- Fecha -->
          <ng-container matColumnDef="CreateRegisterDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Fecha del registro
            </th>
            <td mat-cell *matCellDef="let element" class="center-xs">
              {{ element.CreateRegisterDate }}
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="12">
              <div class="center-align" style="padding: 30px">
                <h3 *ngIf="input.value === ''">No encontramos resultados</h3>
                <h3 *ngIf="input.value !== ''">
                  No encontramos resultado para el filtro "{{ input.value }}"
                </h3>
                <p style="font-size: 10rem; line-height: 5rem; text-align: center;">404</p>
              </div>
            </td>
          </tr>
        </table>
      </mat-card-content>

      <mat-card-footer>
        <div class="row middle-xs" style="padding: 0px 30px">
          <div class="col-xs">
            <button
              mat-stroked-button
              class="font-small" (click)="
                exporter.exportTable('xlsx', { fileName: 'Events' })
              ">
              Descargar como excel
              <mat-icon>file_download</mat-icon>
            </button>
          </div>
          <div class="col-xs">
            <mat-paginator [pageSize]="pageSize" [pageSizeOptions]="[10, 20, 30, 50]" [length]="length"
              itemsPerPageLabel="Elementos por página" (page)="pageEvent = $event">
            </mat-paginator>
          </div>
        </div>
      </mat-card-footer>
    </mat-card>
  </div>
</div>
